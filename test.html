<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Send 1-Byte Adds</title>
</head>
<body>
<h1>1-Byte Add Sender</h1>
<button id="sendBtn">Send 1-Byte</button>
<p id="status">Not connected</p>

<script>
const url = "wss://rcount.onrender.com/ws";
let ws;

function connect() {
    ws = new WebSocket(url);

    ws.binaryType = "arraybuffer";

    ws.onopen = () => {
        document.getElementById("status").innerText = "Connected";
    };

    ws.onclose = () => {
        document.getElementById("status").innerText = "Disconnected, retrying in 2s...";
        setTimeout(connect, 2000);
    };

    ws.onerror = (err) => {
        console.error("WebSocket error:", err);
        ws.close();
    };
}

connect();

document.getElementById("sendBtn").addEventListener("click", () => {
    if (ws.readyState === WebSocket.OPEN) {
        const buffer = new Uint8Array(1); // 1-byte message
        buffer[0] = 1;
        ws.send(buffer);
    } else {
        console.warn("WebSocket not open");
    }
});
</script>
</body>
</html>
